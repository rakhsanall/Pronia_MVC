@using MVC_App.ViewModels.Product
@model ProductUpdateVM



<form enctype="multipart/form-data" method="post" asp-action="Update" asp-controller="Product" style="width: 100%; margin: 20px auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; background-color: #f9f9f9;">

    <label for="title" style="display: block; margin-bottom: 8px; font-weight: bold;">Name:</label>
    <input type="text" asp-for=Name style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;">
    <span asp-validation-for="Name"></span>


    <label for="description" style="display: block; margin-bottom: 8px; font-weight: bold;">Description:</label>
    <textarea asp-for=Description style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;"></textarea>
    <span asp-validation-for="Description"></span>

    <label for="title" style="display: block; margin-bottom: 8px; font-weight: bold;">Price:</label>
    <input type="text" asp-for=Price style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;">
    <span asp-validation-for="Price"></span>

    <label for="Rate" style="display: block; margin-bottom: 8px; font-weight: bold;">Rate:</label>
    <input type="number" asp-for=Rate style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;">
    <span asp-validation-for="Rate"></span>


    <label for="MainImage" style="display: block; margin-bottom: 8px; font-weight: bold;">MainImage URL:</label>
    <input type="hidden" asp-for="MainImagePath"/>
    <img src="~/assets/images/website-images/@Model.MainImagePath" width="50" height="50"/>
    <input asp-for=MainImage style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;">
    <span asp-validation-for="MainImage"></span>

    <label for="HoverImage" style="display: block; margin-bottom: 8px; font-weight: bold;">HoverImage URL:</label>
    <input type="hidden" asp-for="HoverImagePath" />
    <img src="~/assets/images/website-images/@Model.HoverImagePath" width="50" height="50" />
    <input asp-for=HoverImage style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;">
    <span asp-validation-for="HoverImage"></span>


    

    @for(int i = 0; i < Model.AdditionalImagePaths.Count; i++)
    {
        
        <div class="imageDiv">


            <input type="hidden" asp-for="AdditionalImagePaths" value="@Model.AdditionalImagePaths[i]" />
        <input type="hidden" asp-for="AdditionalImageIds" value="@Model.AdditionalImageIds[i]" />

        <div class="image">
                <img src="~/assets/images/website-images/@Model.AdditionalImagePaths[i]" width="50" height="50" />
            <button class="closeButton">delete</button>
        </div>
        </div>
    }

   
    <label for="Images" style="display: block; margin-bottom: 8px; font-weight: bold;">Images:</label>

    <input asp-for=Images style="width: 100%; padding: 8px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px;">
    <span asp-validation-for="Images"></span>

    <select asp-for="CategoryId">
        <option value="null" selected disabled> Choose a category</option>
        @foreach (Category item in ViewBag.Categories)
        {
            <option value="@item.Id">@item.Name</option>

        }

    </select>

    <select asp-for="TagIds" id="TagIds">
        @foreach (Tag tag in ViewBag.Tags)
        {
            <option value="@tag.Id">@tag.Name</option>

        }

    </select>
    <span asp-validation-for="TagIds"></span>
    <span asp-validation-for="CategoryId"></span>

    <div>
        <button type="submit" style="padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">Submit</button>

        <a asp-action="Index" asp-controller="Product" style="text-decoration:none;text-align:center;color:white;margin:5px 30px;width:170px;background:orangered;border-radius:2px;font-size:20px;padding:5px 12px; cursor:pointer;">Cancel</a>

    </div>
</form>


    <script>
    const closeButtons=document.querySelectorAll(".closeButton");
    closeButtons.forEach(btn=>{
        btn.addEventListener("click",(e)=>{
            e.preventDefault();
            btn.parentElement.parentElement.remove();
        })
    })

    </script>